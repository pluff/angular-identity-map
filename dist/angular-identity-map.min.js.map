{"version":3,"file":"angular-identity-map.min.js","sources":["angular-identity-map.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"traverse","angular","module","provider","entityId","entityType","identityMap","raiseInvalidEntity","entity","isDefined","class_name","id","$get","set","eId","eType","_base","this","isMappable","get","entity_or_id","type","detach","obj","isObject","map","existingEntity","existingTraverse","newTraverse","self","forEach","node","level","path","update","Array","isArray","_this","value","key","clear","setEntityTypeFn","fn","setEntityIdFn",2,"Traverse","walk","root","cb","immutable","parents","alive","walker","node_","updateState","state","keys","objectKeys","isLeaf","circular","notLeaf","notRoot","isRoot","copy","modifiers","keepGoing","concat","parent","slice","x","stopHere","delete","remove","splice","before","after","pre","post","stop","block","ret","undefined","push","child","hasOwnProperty","isLast","isFirst","pop","src","dst","isDate","Date","getTime","isRegExp","RegExp","isError","message","isBoolean","Boolean","isNumber","Number","isString","String","Object","create","getPrototypeOf","constructor","proto","prototype","__proto__","T","toS","toString","ps","has","reduce","init","skip","arguments","acc","paths","nodes","clone","res","xs","args","apply"],"mappings":"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"}