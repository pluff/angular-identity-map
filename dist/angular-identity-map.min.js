/*! angular-identity-map 17-12-2014 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){(function(){"use strict";var b;b=a("traverse"),angular.module("identity-map",[]).provider("IdentityMap",function(){var a,c,d,e;return d={},c=function(a){return angular.isDefined(a.class_name)?a.class_name:void 0},a=function(a){return angular.isDefined(a.id)?a.id:void 0},e=function(){throw Error("Cannot get entityType or entityId for identity-map.")},{$get:function(){return{set:function(b){var f,g,h;return this.isMappable(b)||e(),g=c(b),f=a(b),d[g]||(d[g]={}),(h=d[g])[f]||(h[f]=b),d[g][f]},get:function(b,f){var g,h;return null==f&&(f=null),null!=f?(h=f,g=b):(this.isMappable(b)||e(),h=c(b),g=a(b)),d[h]||(d[h]={}),d[h][g]},detach:function(b){var f,g;return this.isMappable(b)||e(),g=c(b),f=a(b),d[g]||(d[g]={}),delete d[g][f]},isMappable:function(b){return angular.isObject(b)&&c(b)&&a(b)},map:function(a){var c,d,e,f;return this.isMappable(a)?(c=this.get(a))?(d=b(c),e=b(a),f=this,e.forEach(function(a){return 1===this.level?d.set(this.path,f.map(a)):void 0}),c):(e=b(a),f=this,e.forEach(function(a){return 1===this.level?this.update(f.map(a)):void 0}),this.set(a)):((Array.isArray(a)||angular.isObject(a))&&angular.forEach(a,function(b){return function(c,d){return a[d]=b.map(c)}}(this)),a)},clear:function(){return d={}}}},setEntityTypeFn:function(a){return c=a},setEntityIdFn:function(b){return a=b}}})}).call(this)},{traverse:2}],2:[function(a,b){function c(a){this.value=a}function d(a,b,c){var d=[],f=[],g=!0;return function h(a){function i(){if("object"==typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=n(m.node)),m.isLeaf=0==m.keys.length;for(var b=0;b<f.length;b++)if(f[b].node_===a){m.circular=f[b];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}var j=c?e(a):a,k={},l=!0,m={node:j,node_:a,path:[].concat(d),parent:f[f.length-1],parents:f,key:d.slice(-1)[0],isRoot:0===d.length,level:d.length,circular:null,update:function(a,b){m.isRoot||(m.parent.node[m.key]=a),m.node=a,b&&(l=!1)},"delete":function(a){delete m.parent.node[m.key],a&&(l=!1)},remove:function(a){o(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],a&&(l=!1)},keys:null,before:function(a){k.before=a},after:function(a){k.after=a},pre:function(a){k.pre=a},post:function(a){k.post=a},stop:function(){g=!1},block:function(){l=!1}};if(!g)return m;i();var r=b.call(m,m.node);return void 0!==r&&m.update&&m.update(r),k.before&&k.before.call(m,m.node),l?("object"!=typeof m.node||null===m.node||m.circular||(f.push(m),i(),p(m.keys,function(a,b){d.push(a),k.pre&&k.pre.call(m,m.node[a],a);var e=h(m.node[a]);c&&q.call(m.node,a)&&(m.node[a]=e.node),e.isLast=b==m.keys.length-1,e.isFirst=0==b,k.post&&k.post.call(m,e),d.pop()}),f.pop()),k.after&&k.after.call(m,m.node),m):m}(a).node}function e(a){if("object"==typeof a&&null!==a){var b;if(o(a))b=[];else if(g(a))b=new Date(a.getTime?a.getTime():a);else if(h(a))b=new RegExp(a);else if(i(a))b={message:a.message};else if(j(a))b=new Boolean(a);else if(k(a))b=new Number(a);else if(l(a))b=new String(a);else if(Object.create&&Object.getPrototypeOf)b=Object.create(Object.getPrototypeOf(a));else if(a.constructor===Object)b={};else{var c=a.constructor&&a.constructor.prototype||a.__proto__||{},d=function(){};d.prototype=c,b=new d}return p(n(a),function(c){b[c]=a[c]}),b}return a}function f(a){return Object.prototype.toString.call(a)}function g(a){return"[object Date]"===f(a)}function h(a){return"[object RegExp]"===f(a)}function i(a){return"[object Error]"===f(a)}function j(a){return"[object Boolean]"===f(a)}function k(a){return"[object Number]"===f(a)}function l(a){return"[object String]"===f(a)}var m=b.exports=function(a){return new c(a)};c.prototype.get=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];if(!b||!q.call(b,d)){b=void 0;break}b=b[d]}return b},c.prototype.has=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];if(!b||!q.call(b,d))return!1;b=b[d]}return!0},c.prototype.set=function(a,b){for(var c=this.value,d=0;d<a.length-1;d++){var e=a[d];q.call(c,e)||(c[e]={}),c=c[e]}return c[a[d]]=b,b},c.prototype.map=function(a){return d(this.value,a,!0)},c.prototype.forEach=function(a){return this.value=d(this.value,a,!1),this.value},c.prototype.reduce=function(a,b){var c=1===arguments.length,d=c?this.value:b;return this.forEach(function(b){this.isRoot&&c||(d=a.call(this,d,b))}),d},c.prototype.paths=function(){var a=[];return this.forEach(function(){a.push(this.path)}),a},c.prototype.nodes=function(){var a=[];return this.forEach(function(){a.push(this.node)}),a},c.prototype.clone=function(){var a=[],b=[];return function c(d){for(var f=0;f<a.length;f++)if(a[f]===d)return b[f];if("object"==typeof d&&null!==d){var g=e(d);return a.push(d),b.push(g),p(n(d),function(a){g[a]=c(d[a])}),a.pop(),b.pop(),g}return d}(this.value)};var n=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},o=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},p=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)};p(n(c.prototype),function(a){m[a]=function(b){var d=[].slice.call(arguments,1),e=new c(b);return e[a].apply(e,d)}});var q=Object.hasOwnProperty||function(a,b){return b in a}},{}]},{},[1]);
//# sourceMappingURL=angular-identity-map.min.js.map